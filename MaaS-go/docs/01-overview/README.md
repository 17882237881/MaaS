# MaaS Platform - 模型即服务平台

> 🎯 项目目标：从零构建企业级模型即服务(MaaS)平台，系统学习后端开发核心技术栈

## 📖 项目简介

### 什么是MaaS？
Model-as-a-Service（模型即服务）是一种云计算服务模式，允许用户将机器学习模型部署为可调用的API服务，无需管理底层基础设施。

**典型场景**：
- 开发者上传训练好的AI模型（如BERT、ResNet）
- 平台自动构建Docker镜像并部署
- 用户通过API调用模型进行推理
- 平台按调用次数/资源使用量计费

### 为什么做这个项目？

**学习目标**：
1. **微服务架构**：服务拆分、服务治理、RPC通信
2. **分布式系统**：一致性、分布式事务、CAP理论实践
3. **云原生技术**：Docker、Kubernetes、DevOps
4. **中间件使用**：消息队列、缓存、搜索引擎
5. **数据库技术**：关系型/NoSQL、分库分表、优化
6. **高并发处理**：限流熔断、负载均衡、性能优化

**适用人群**：
- 有一定Go语言基础（能写简单程序）
- 想系统学习后端技术栈
- 准备入职大厂后端岗位

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                    接入层                                │
│  API Gateway (Gin) - 统一入口、认证鉴权、限流熔断          │
├─────────────────────────────────────────────────────────┤
│                    业务服务层                            │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │
│  │Model Registry│ │Inference     │ │User Center   │     │
│  │(模型管理)     │ │Engine(推理)   │ │(用户中心)     │     │
│  └──────────────┘ └──────────────┘ └──────────────┘     │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │
│  │Deployment    │ │Resource      │ │Billing       │     │
│  │Controller    │ │Scheduler     │ │Service       │     │
│  │(部署控制)     │ │(资源调度)     │ │(计费)         │     │
│  └──────────────┘ └──────────────┘ └──────────────┘     │
├─────────────────────────────────────────────────────────┤
│                    基础设施层                            │
│  PostgreSQL │ Redis │ MinIO │ Kafka │ Elasticsearch     │
├─────────────────────────────────────────────────────────┤
│                    部署层                                │
│  Docker │ Kubernetes │ Helm │ Prometheus │ Grafana       │
└─────────────────────────────────────────────────────────┘
```

## 📅 项目阶段规划

### 阶段总览

| 阶段 | 名称 | 周期 | 核心目标 | 产出 |
|------|------|------|----------|------|
| **阶段1** | 基础架构搭建 | 4周 | 微服务基础、API网关、数据库 | 可运行的基础服务 |
| **阶段2** | 核心功能开发 | 5周 | 服务通信、缓存、认证、推理 | 完整的MaaS流程 |
| **阶段3** | 企业级特性 | 4周 | 消息队列、K8s、限流、监控 | 生产级部署能力 |
| **阶段4** | 高级特性与优化 | 3周 | GPU调度、多租户、性能优化 | 企业级平台 |

### 详细阶段说明

#### 阶段1：基础架构搭建（4周）

**学习目标**：
- 掌握Go语言企业级项目结构
- 理解微服务拆分原则
- 学会使用Gin框架开发RESTful API
- 掌握GORM进行数据库操作
- 学会Docker容器化部署

**包含节点**：
1. **节点1.1**：项目初始化与架构设计（3天）
2. **节点1.2**：API Gateway核心（5天）
3. **节点1.3**：配置管理体系（3天）
4. **节点1.4**：日志与监控基础（4天）
5. **节点1.5**：数据库层设计（5天）

**技术栈**：
- Go 1.21+
- Gin Web框架
- GORM + PostgreSQL
- Zap日志库
- Viper配置管理
- Docker & Docker Compose

#### 阶段2：核心功能开发（5周）

**学习目标**：
- 掌握gRPC服务间通信
- 学会Redis缓存策略
- 实现JWT认证与RBAC权限
- 处理大文件上传
- 构建推理服务

**包含节点**：
1. **节点2.1**：服务间通信（5天）
2. **节点2.2**：缓存层设计（4天）
3. **节点2.3**：认证与授权（5天）
4. **节点2.4**：模型上传与存储（5天）
5. **节点2.5**：模型版本管理（4天）
6. **节点2.6**：推理服务基础（5天）

**技术栈**：
- gRPC + Protocol Buffers
- Redis
- JWT + Casbin
- MinIO对象存储

#### 阶段3：企业级特性（4周）

**学习目标**：
- 掌握消息队列异步处理
- 学会Kubernetes部署
- 实现限流熔断机制
- 处理分布式事务
- 搭建监控告警体系

**包含节点**：
1. **节点3.1**：消息队列集成（5天）
2. **节点3.2**：容器化与编排（5天）
3. **节点3.3**：限流与熔断（4天）
4. **节点3.4**：分布式事务（4天）
5. **节点3.5**：监控告警体系（4天）

**技术栈**：
- Kafka
- Kubernetes + Helm
- Sentinel（熔断限流）
- DTM（分布式事务）
- Prometheus + Grafana + Jaeger

#### 阶段4：高级特性与优化（3周）

**学习目标**：
- 掌握GPU资源调度
- 实现多租户隔离
- 进行性能优化
- 搭建CI/CD流水线

**包含节点**：
1. **节点4.1**：模型部署与调度（5天）
2. **节点4.2**：多租户与配额（4天）
3. **节点4.3**：性能优化（4天）
4. **节点4.4**：CI/CD流水线（3天）

**技术栈**：
- NVIDIA Docker
- Kubernetes HPA/VPA
- GitHub Actions
- pprof性能分析

## 📚 文档结构

```
docs/
├── 01-overview/           # 项目总览（本文档）
├── 02-phase1/            # 阶段1文档
│   ├── README.md         # 阶段1总览
│   ├── node-1-1.md       # 节点1.1详细文档
│   ├── node-1-2.md       # 节点1.2详细文档
│   └── ...
├── 03-phase2/            # 阶段2文档
├── 04-phase3/            # 阶段3文档
├── 05-phase4/            # 阶段4文档
└── 06-appendix/          # 附录
    ├── tech-glossary.md  # 技术术语表
    ├── go-best-practices.md  # Go最佳实践
    └── troubleshooting.md    # 常见问题
```

## 🚀 如何开始学习

### 前置知识
- **Go语言基础**：变量、函数、结构体、接口、goroutine
- **数据库基础**：SQL语法、关系型数据库概念
- **Linux基础**：常用命令、文件系统
- **Git基础**：分支、提交、合并

### 推荐学习资源
- **Go语言**：《Go程序设计语言》
- **微服务**：《微服务设计》（Chris Richardson）
- **分布式系统**：《Designing Data-Intensive Applications》
- **云原生**：《Kubernetes in Action》

### 开发环境准备
1. 安装Go 1.21+
2. 安装Docker & Docker Compose
3. 安装PostgreSQL
4. 安装Redis
5. 配置IDE（推荐VSCode + Go插件）

## 📝 学习建议

### 每节点的学习流程
1. **预习**：阅读文档中的技术介绍
2. **实践**：跟着文档一步步实现代码
3. **思考**：理解为什么这样做，有没有其他方案
4. **扩展**：尝试添加自己的功能或优化
5. **记录**：写下学习笔记和遇到的问题

### 代码提交规范
每个节点完成后，代码提交到GitHub：
```bash
git add .
git commit -m "feat(phase1/node1.1): 项目初始化与架构设计"
git push origin main
```

### 检查清单
每个节点开始前，确认：
- [ ] 阅读了技术介绍文档
- [ ] 理解了学习目标
- [ ] 准备了所需的环境
- [ ] 上一节点已完成并测试通过

## 🎯 里程碑检查点

### 阶段1结束
- [ ] API Gateway可独立运行
- [ ] Model Registry支持基础CRUD
- [ ] 数据库迁移正常工作
- [ ] Docker Compose可启动所有服务

### 阶段2结束
- [ ] Gateway到后端服务的gRPC调用正常
- [ ] 实现了JWT认证
- [ ] 支持模型文件上传
- [ ] 推理接口可调用

### 阶段3结束
- [ ] 消息队列异步任务正常运行
- [ ] Kubernetes部署配置完成
- [ ] 限流熔断机制生效
- [ ] 监控仪表盘可查看

### 阶段4结束
- [ ] 支持GPU调度
- [ ] 多租户隔离正常
- [ ] 性能测试达标
- [ ] CI/CD流水线自动化

## 📞 获取帮助

遇到问题时的解决路径：
1. 查看当前节点的**疑难解答**章节
2. 查阅**技术术语表**
3. 搜索Stack Overflow或Go官方文档
4. 在GitHub Issues中提问

## 🏆 完成奖励

完成整个项目后，你将拥有：
- ✅ 一个可演示的企业级MaaS平台
- ✅ 完整的微服务开发经验
- ✅ 云原生技术的实践经验
- ✅ 一份亮眼的项目经历（可写入简历）

---

**下一步**：阅读 `docs/02-phase1/README.md` 开始阶段1的学习！